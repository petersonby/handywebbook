# JavaScript

Ответы на вопросы с собеседований по JavaScript.  
Простые ответы на сложные (и не очень) вопросы.  
Да-да, это повторение mdn, спецификаций, и статьи, что вы когда-то читали, ничего нового.

## Оглавление
- [DOM](#dom)
- [Типы данных](#типы-данных)
- [Контекст выполнения](#контекст-выполнения)
- [Замыкания](#замыкания)
- [Async/defer атрибуты](#asyncdefer-атрибуты)
- [Node.js, NPM](#nodejs-npm)
- Прототипы
- Event Loop
- Классы
- Promises (Промисы)
- Express.js
- REST API
- NOSQL Databases (mongodb)
- Postgresql
- Микросервисы
- JS Doc
- Тестирование (UNIT, etc)
- Протоколы HTTP, HTTPS
- Docker

## Вопросы и ответы

### DOM
_DOM_ («Document Object Model» – Объектная модель документа) – способ представления веб-страницы в виде структуры тегов наподобие дерева. Каждый _html-элемент_, а также _текстовый узел_ является __объектом__. Пробелы и переводы строки – это полноправные символы, они образуют текстовые узлы и становятся частью дерева _DOM_.  Кроме того, даже объект `document`, представляющий весь документ, формально является DOM-узлом. 

По существу, __DOM__ соединяет веб-страницу с языками описания сценариев либо языками программирования.
Посмотреть вживую на структуру __DOM__ _(с некоторыми оговорками)_ можно в «инструментах разработчика» вашего браузера.

Существует __12 типов узлов__. Но на практике мы в основном работаем с __4 из них__:
- `document` – «входная точка» в DOM.
- __узлы-элементы__ – HTML-теги, основные строительные блоки.
- __текстовые узлы__ – содержат текст.
- __комментарии__ – иногда в них можно включить информацию, которая не будет показана на странице, но доступна в DOM для чтения JS.

### Типы данных

В JavaScript существует __7 типов__ данных: __6 примитивных__ и __object__.

Примитивные типы данных:  
1. Number (Число)

    В JS имеется только один тип данных для целых чисел и чисел с плавающей точкой. Кроме обычных чисел, существуют так называемые «специальные числовые значения», которые относятся к этому типу данных: `Infinity`, `-Infinity` и `NaN`:  
    `Infinity` – бесконечность ∞. Это особое значение, которое больше любого числа.

    Мы можем получить его в результате деления на ноль:
    ```JavaScript
    console.log( 1 / 0 ); // Infinity
    ```
    Или задать его явно:
    ```JavaScript
    console.log( Infinity ); // Infinity
    ```
    
    `NaN` означает вычислительную ошибку. Это результат неправильной или неопределённой математической операции, например:
    ```JavaScript
    console.log( "строка" / 2 ); // NaN
    ```
2. String (Строка)

    В JavaScript существует три типа кавычек:
    - Двойные кавычки: `"Привет"`.
    - Одинарные кавычки: `'Привет'`.
    - Обратные кавычки: `` `Привет` ``. Они имеют «расширенный функционал». Они позволяют нам встраивать выражения в строку, заключая их в `${…}`. Например:
    
    ```JavaScript
    let age = 5;
    
    let me = `Меня зовут Вася, мне ${age} лет.` // Меня зовут Вася, мне 5 лет.
    
    ```
3. Boolean (Булевый или логический)

    _Булевый тип_ может принимать только два значения: `true` (истина) и `false` (ложь).
4. Null
5. Undefined
6. Symbol (Символ)

### Контекст выполнения

_Контекст выполнения (execution context)_ – специальная внутренняя структура данных, которая содержит информацию о вызове функции. Она включает в себя конкретное место в коде, на котором находится интерпретатор, локальные переменные функции, значение `this` и прочую служебную информацию.

Один вызов функции имеет ровно один контекст выполнения, связанный с ним.

Когда функция производит вложенный вызов, происходит следующее:

1. Выполнение текущей функции приостанавливается.
2. Контекст выполнения, связанный с ней, _запоминается_ в специальной структуре данных – _стеке контекстов выполнения (execution stack)_ (его же называют _стеком вызовов (call stack)_).
3. Выполняются _вложенные вызовы_, для каждого из которых _создаётся свой_ __контекст выполнения_.
4. После их завершения _старый контекст достаётся из стека_, и выполнение внешней функции возобновляется с того места, где она была остановлена.

### Замыкания

_Замыкание (closure)_ – функция вместе со своим внешним окружением.

В случае _JavaScript_ правильным ответом на вопрос о том, что такое замыкание, будет _определение_ замыкания и объяснение того факта, что _все функции в JavaScript являются замыканиями_, а также рассказ о свойстве `[[Environment]]` и о том, как работает __лексическое окружение__.

Тема замыканий тесно связана с темой _лексического окружения_, о нём будет рассказ подробнее позже.
Все функции «при рождении» получают скрытое свойство `[[Environment]]`, которое ссылается на _лексическое окружение_ места, где они были созданы.

```JavaScript
function makeCounter() {
  let count = 0;

  return function() {
    return count++; // есть доступ к внешней переменной "count"
  };
}

let counter = makeCounter();
let counter2 = makeCounter();

alert( counter() ); // 0
alert( counter() ); // 1
alert( counter2() ); // 0
alert( counter2() ); // 1
```

### Async/defer атрибуты

Атрибуты `async` и `defer` добавляются к тегу `<script src="">`, при этом их действие не распространяется на содержимое тега `<script>`, т.е. они __работают только для внешних файлов__ скриптов.

#### defer
Атрибут `defer` сообщает браузеру, что тот должен продолжать обрабатывать страницу и загружать скрипт в фоновом режиме, а затем запустить этот скрипт, когда он загрузится.

```HTML
<script defer src=""></script>
```

- Содержимое страницы отобразится мгновенно.  
- Скрипты с defer никогда не блокируют страницу.  
- Скрипты с defer всегда выполняются, когда дерево DOM готово, но до события `DOMContentLoaded`.  
- Событие `DOMContentLoaded` подождёт отложенный скрипт. Оно будет сгенерировано, только когда скрипт с атрибутом `defer` будет загружен и выполнен.
- Отложенные с помощью `defer` скрипты сохраняют порядок относительно друг друга, как и обычные скрипты. Поэтому, если сначала загружается большой скрипт, а затем меньшего размера, то последний будет ждать.

#### async

Атрибут `async` означает, что скрипт абсолютно независим:

- Страница _не ждёт_ асинхронных скриптов, содержимое обрабатывается и отображается.
- Событие `DOMContentLoaded` и асинхронные скрипты не ждут друг друга: `DOMContentLoaded` может произойти как до, так и после асинхронного скрипта
- Остальные скрипты не ждут `async`, и скрипты c `async` не ждут другие скрипты. Так что если есть несколько скриптов с `async`, они могут выполняться в любом порядке. То, что первое загрузится – запустится в первую очередь.

```HTML
<script async src=""></script>
```

Асинхронные скрипты полезны для добавления на страницу сторонних скриптов: счётчиков, рекламы и прочего, поскольку они не зависят от внутренних скриптов сайта.

### Node.js, NPM

__Node.js__ – среда выполнения JavaScript. Она использует управляемую событиями, неблокирующую модель ввода-вывода. Под капотом у Node.js _движок V8_ от Chrome, в 
также такие библиотеки, как __libuv, llhttp, c-ares, OpenSSL, zlib__. Узнать подробнее, для чего они необходимы, можно [здесь](https://nodejs.org/ru/docs/meta/topics/dependencies/). С Node.js связано также понятие __Event Loop (цикл событий)__, которое будет описано ниже.

__NPM__ – менеджер пакетов (библиотек) Node. Содержит огромное количество библиотек, которые можно скачать и использовать в своём проекте одной строчкой в терминале:

```shell
npm install package-name
```

Где `package-name` это название пакета в npm.
